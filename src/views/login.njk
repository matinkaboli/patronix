{% extends './layouts/index.njk' %}

{% block head %}
<link rel="stylesheet" href="/files/css/alert.css">
<link rel="stylesheet" href="/files/css/inputs.css">
<script src="/files/js/lib/sweetalert.min.js"></script>
{% endblock %}

{% block content %}
<div class="alert" id="error">
</div>
<div class="alert" id="warn">
</div>
<div class="alert" id="success">
</div>
<form
  class="login"
  method="post"
  action="/login"
  name="login-form"
  onsubmit="return checkForm()">
  <input
    type="email"
    name="email"
    placeholder="ایمیل"
    required>
  <input
    type="password"
    name="password"
    placeholder="رمز ورود"
    maxlength="200"
    required>
  <input
    type="submit"
    value="ورود">
</form>
<a href="/code">فعالسازی اکانت</a>
<a href="/forgot">فراموشی رمز</a>
<a href="/resend">دوباره فرستادن کد</a>
{% endblock %}

{% block scripts %}

{% for i in w %}
{% if i == '0' %}
<script>
  const divW = document.getElementById('warn');
  const p = document.createElement('p');
  p.innerHTML = 'حساب شما قبلا تایید شده.';
  divW.appendChild(p);
  divW.style.display = 'block';
</script>
{% endif %}
{% endfor %}
{% for i in s %}
{% if i == '0' %}
<script>
  const divS = document.getElementById('success');
  const p = document.createElement('p');
  p.innerHTML = 'حساب شما با موفقیت تایید شد';
  divS.appendChild(p);
  divS.style.display = 'block';
</script>
{% endif %}
{% endfor %}
{% for i in e %}
{% if i == '1' %}
<script>
  const divE = document.getElementById('error');
  const p = document.createElement('p');
  p.innerHTML = 'خطا! بعدا امتحان کنید.';
  divE.appendChild(p);
  divE.style.display = 'block';
</script>
{% endif %}
{% endfor %}
{% for i in email %}
  <script>
    document.forms['login-form'].email.value = "{{ i }}";
  </script>
{% endfor %}
  <script src="/files/js/lib/validator.js"></script>
  <script src="/files/js/checkLogin.js"></script>
{% endblock %}
